<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>gdb常用调试指令 | Tyxxzjpdez&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="背景 最近在看《Linux环境编程：从应用到内核》，涉及到了比较多的内核代码，恰好之前尝试过调试内核，但那时由于对内核无从下手，很容易一进门就迷失，进而就失去兴趣了。这次打算以这本书作为一个线索，不过多地追究细节，快速定位并搞懂关键性概念。 如何创建调试环境虽然比较麻烦，但网上教程较多，这里不多赘述，具体可参看以下三篇博客：   使用 linux kernel +busybox 定制linux系统">
<meta property="og:type" content="article">
<meta property="og:title" content="gdb常用调试指令">
<meta property="og:url" content="http://tyxxzjpdez.github.io/newblog/2021/09/09/gdb%E5%B8%B8%E7%94%A8%E8%B0%83%E8%AF%95%E6%8C%87%E4%BB%A4/index.html">
<meta property="og:site_name" content="Tyxxzjpdez&#39;s Blog">
<meta property="og:description" content="背景 最近在看《Linux环境编程：从应用到内核》，涉及到了比较多的内核代码，恰好之前尝试过调试内核，但那时由于对内核无从下手，很容易一进门就迷失，进而就失去兴趣了。这次打算以这本书作为一个线索，不过多地追究细节，快速定位并搞懂关键性概念。 如何创建调试环境虽然比较麻烦，但网上教程较多，这里不多赘述，具体可参看以下三篇博客：   使用 linux kernel +busybox 定制linux系统">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-09-09T14:43:01.000Z">
<meta property="article:modified_time" content="2021-09-19T11:48:22.041Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="debug">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/newblog/atom.xml" title="Tyxxzjpdez's Blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/newblog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/newblog/css/style.css">

  
    
<link rel="stylesheet" href="/newblog/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/newblog/" id="logo">Tyxxzjpdez&#39;s Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/newblog/">Home</a>
        
          <a class="main-nav-link" href="/newblog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/newblog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://tyxxzjpdez.github.io/newblog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-gdb常用调试指令" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/newblog/2021/09/09/gdb%E5%B8%B8%E7%94%A8%E8%B0%83%E8%AF%95%E6%8C%87%E4%BB%A4/" class="article-date">
  <time class="dt-published" datetime="2021-09-09T14:43:01.000Z" itemprop="datePublished">2021-09-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      gdb常用调试指令
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="背景">背景</h2>
<p>最近在看《Linux环境编程：从应用到内核》，涉及到了比较多的内核代码，恰好之前尝试过调试内核，但那时由于对内核无从下手，很容易一进门就迷失，进而就失去兴趣了。这次打算以这本书作为一个线索，不过多地追究细节，快速定位并搞懂关键性概念。</p>
<p>如何创建调试环境虽然比较麻烦，但网上教程较多，这里不多赘述，具体可参看以下三篇博客：</p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/CtripDBA/p/12290071.html">使用 linux kernel +busybox 定制linux系统</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://consen.github.io/2018/01/17/debug-linux-kernel-with-qemu-and-gdb/">使用QEMU和GDB调试Linux内核</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/zhaojia92/article/details/100717580">搭建Linux kernel调试环境-busybox构建最小根文件系统</a></p>
</li>
</ul>
<p>本文重点是搭建调试环境以后如何使用gdb进行调试</p>
<h2 id="gdb配置">gdb配置</h2>
<p>虽然现在随着gdb版本的提高，功能也越来越完善，但是经过配置完全可以变得更友好得多，这里主要使用<a target="_blank" rel="noopener" href="https://github.com/pwndbg/pwndbg">pwndbg</a> 这个工具。当然，在内核调试该工具相应比较慢，甚至出现半天不响应的情况，所以可能存在bug，但是在一般的项目中是足够的，曾经就使用它查看过动态库的载入，默认配置就已经很舒服，很直观。</p>
<h2 id="gdb命令">gdb命令</h2>
<h3 id="建议的额外编译选项">建议的额外编译选项</h3>
<p>编译建议加上<code>-ggdb</code>，从<code>man gdb</code>可以看到这对于gdb可以产生几乎最多的调试信息</p>
<h3 id="开始调试">开始调试</h3>
<ul>
<li><code>gdb program</code> 一般指从没有运行的程序开始调试</li>
<li><code>gdb program core</code> 指定可执行文件和core文件</li>
<li><code>gdb program 123</code>或者<code>gdb -p 1234</code>指定调试一个已经运行的程序，此时一般需要调试的程序与被调试的程序之间是祖先与子孙关系，否则就需要root权限</li>
</ul>
<h3 id="常用命令">常用命令</h3>
<ul>
<li><strong>help cmd</strong>         #查看相关命令的使用方法</li>
<li><strong>start</strong>                  #开始调试，并停在第一行代码</li>
<li><strong>list</strong>                     #查看当前位置上下的源代码</li>
<li><strong>breakpoints  &lt;lines&gt;/&lt;func&gt;</strong>        #在制定行或者函数设置断点</li>
<li><strong>info breakpoints</strong>                             #查看当前设置的断点</li>
<li><strong>delete breakpoints [NO]</strong>               #删除指定编号的某个断点，或删除所有断点。断点编号从1开始递增</li>
<li><strong>step</strong>                  #执行一行源程序代码，如果此行代码中有函数调用，则进入该函数</li>
<li><strong>next</strong>                  #执行一行源程序代码，此行代码中的函数调用也一并直接执行，不跳入</li>
<li><strong>run</strong>                   #运行被调试的程序。如果此前没有下过断点，则执行完整个程序；如果有断点，则程序暂停在第一个可用断点处</li>
<li><strong>continue</strong>         #继续执行被调试程序，直至下一个断点或程序结束</li>
<li><strong>finish</strong>               #函数结束</li>
<li><strong>backtrace</strong>       #查看当前栈帧</li>
<li><strong>layout asm/next</strong>                               #使用asm或者next布局，比较友好，详情看help</li>
<li><strong>print/display/disassemble 未完待续</strong></li>
</ul>
<h2 id="参考">参考</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/mercy_ps/article/details/81542986">GDB调试基本命令</a></li>
<li><code>man gdb</code></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://tyxxzjpdez.github.io/newblog/2021/09/09/gdb%E5%B8%B8%E7%94%A8%E8%B0%83%E8%AF%95%E6%8C%87%E4%BB%A4/" data-id="cktr5owak0003zzm827l8hrwt" data-title="gdb常用调试指令" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/newblog/tags/debug/" rel="tag">debug</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/newblog/2021/09/09/%E5%A4%9A%E6%A0%B8%E7%BC%96%E7%A8%8B/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          多核编程
        
      </div>
    </a>
  
  
    <a href="/newblog/2021/09/05/%E5%B0%8F%E7%82%B9%E9%9B%86%E9%94%A6/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">小点集锦</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/Linux/" rel="tag">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/SMP/" rel="tag">SMP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/coroutine/" rel="tag">coroutine</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/debug/" rel="tag">debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/multi-thread/" rel="tag">multi-thread</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/notes/" rel="tag">notes</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/process/" rel="tag">process</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/roast/" rel="tag">roast</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/shell/" rel="tag">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/newblog/tags/thread/" rel="tag">thread</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/newblog/tags/C/" style="font-size: 15px;">C++</a> <a href="/newblog/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/newblog/tags/SMP/" style="font-size: 10px;">SMP</a> <a href="/newblog/tags/coroutine/" style="font-size: 10px;">coroutine</a> <a href="/newblog/tags/debug/" style="font-size: 10px;">debug</a> <a href="/newblog/tags/multi-thread/" style="font-size: 10px;">multi-thread</a> <a href="/newblog/tags/notes/" style="font-size: 10px;">notes</a> <a href="/newblog/tags/process/" style="font-size: 10px;">process</a> <a href="/newblog/tags/roast/" style="font-size: 15px;">roast</a> <a href="/newblog/tags/shell/" style="font-size: 10px;">shell</a> <a href="/newblog/tags/thread/" style="font-size: 10px;">thread</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/newblog/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/newblog/archives/2021/08/">August 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/newblog/2021/09/19/%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6/">Linux的进程调度</a>
          </li>
        
          <li>
            <a href="/newblog/2021/09/09/%E5%A4%9A%E6%A0%B8%E7%BC%96%E7%A8%8B/">多核编程</a>
          </li>
        
          <li>
            <a href="/newblog/2021/09/09/gdb%E5%B8%B8%E7%94%A8%E8%B0%83%E8%AF%95%E6%8C%87%E4%BB%A4/">gdb常用调试指令</a>
          </li>
        
          <li>
            <a href="/newblog/2021/09/05/%E5%B0%8F%E7%82%B9%E9%9B%86%E9%94%A6/">小点集锦</a>
          </li>
        
          <li>
            <a href="/newblog/2021/08/31/linux-shell-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E9%9B%86%E9%94%A6/">Linux shell 常用命令集锦</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/newblog/" class="mobile-nav-link">Home</a>
  
    <a href="/newblog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/newblog/js/jquery-3.4.1.min.js"></script>



  
<script src="/newblog/fancybox/jquery.fancybox.min.js"></script>




<script src="/newblog/js/script.js"></script>





  </div>
</body>
</html>