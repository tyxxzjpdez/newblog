---
title: 小点集锦
date: 2021-09-05 21:10:28
tags:
  - notes
---

主要记录一些有点意思但又没有必要为此写新博客的一些点

1. 迭代器的失效一般与容器类型相关，详见[C++迭代器失效的几种情况总结](https://www.cnblogs.com/fnlingnzb-learner/p/9300073.html)。但是具体实现可能会有区别，例如vector的erase为了减小开销就使用拷贝然后销毁末尾的元素，这样的erase其实并不会让删除元素后面的所有迭代器失效，详见[c++之你真的了解vector的erase吗](https://www.cnblogs.com/chaohacker/p/13024357.html)
2. `gcc`编译链接的时候使用`-v`参数，可以显示具体的详细过程。我们可以发现最后一步并没有直接使用`ld`，而是使用了`collect2`，它主要是为了实现main函数开始前以及结束后的一些函数的注册。详见[collect2](http://www.wanglianghome.org/2011/04/14/collect2/)以及[官方文档](https://gcc.gnu.org/onlinedocs/gccint/Collect2.html)，也可以使用`info gccint-11 'collect2'`查看离线的官方文档。
3. 数据库加间隙锁的本质是因为当本条满足条件，那最多它的相邻的两个区间也会满足条件，当这些所有间隙都被锁了以后，才不会出现幻读，因为要满足之前条件的insert必然在上面的所有间隙内。（当然以上是在查询为索引的情况下）

